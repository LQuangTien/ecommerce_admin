(this["webpackJsonpadmin-app"]=this["webpackJsonpadmin-app"]||[]).push([[0],{341:function(e,t,a){},364:function(e,t,a){},368:function(e,t,a){},370:function(e,t,a){},372:function(e,t,a){},615:function(e,t,a){},616:function(e,t,a){},617:function(e,t,a){},618:function(e,t,a){},619:function(e,t,a){},620:function(e,t,a){},621:function(e,t,a){},622:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(29),s=a.n(n),i=(a(341),a(18)),o=a(28),l=a(11),d=a.n(l),j=a(3),u=a(26),b=a(223),m=a.n(b),O=a(98),p=a(307),h=a(308),f="LOGIN_REQUEST",g="LOGIN_FAILURE",x="LOGIN_SUCCESS",v="LOGOUT_REQUEST",y="LOGOUT_SUCCESS",_="LOGOUT_FAILURE",N="REGISTER_REQUEST",E="REGISTER_FAILURE",C="REGISTER_SUCCESS",S="GET_CATEGORY_REQUEST",k="GET_CATEGORY_SUCCESS",T="GET_CATEGORY_FAILURE",w="GET_ALL_CATEGORY_REQUEST",A="GET_ALL_CATEGORY_FAILURE",R="GET_ALL_CATEGORY_SUCCESS",U="ADD_CATEGORY_REQUEST",P="ADD_CATEGORY_FAILURE",D="ADD_CATEGORY_SUCCESS",I="UPDATE_CATEGORY_REQUEST",L="UPDATE_CATEGORY_FAILURE",F="UPDATE_CATEGORY_SUCCESS",G="DELETE_CATEGORY_REQUEST",M="DELETE_CATEGORY_FAILURE",q="DELETE_CATEGORY_SUCCESS",Y="ENABLE_CATEGORY_REQUEST",B="ENABLE_CATEGORY_FAILURE",Q="ENABLE_CATEGORY_SUCCESS",z="GET_ALL_PRODUCT_SUCCESS",J="GET_PRODUCT_DETAIL_REQUEST",V="GET_PRODUCT_DETAIL_FAILURE",H="GET_PRODUCT_DETAIL_SUCCESS",$="CREATE_PRODUCT_REQUEST",W="CREATE_PRODUCT_FAILURE",X="CREATE_PRODUCT_SUCCESS",K="UPDATE_PRODUCT_REQUEST",Z="UPDATE_PRODUCT_FAILURE",ee="UPDATE_PRODUCT_SUCCESS",te="DELETE_PRODUCT_REQUEST",ae="DELETE_PRODUCT_FAILURE",re="DELETE_PRODUCT_SUCCESS",ce="ENABLE_PRODUCT_REQUEST",ne="ENABLE_PRODUCT_SUCCESS",se="ENABLE_PRODUCT_FAILURE",ie="GET_INITIALDATA_REQUEST",oe="GET_INITIALDATA_SUCCESS",le="CREATE_PAGE_REQUEST",de="CREATE_PAGE_FAILURE",je="CREATE_PAGE_SUCCESS",ue="GET_ORDER_SUCCESS",be="UPDATE_ORDER_REQUEST",me="UPDATE_ORDER_FAILURE",Oe="UPDATE_ORDER_SUCCESS",pe="GET_ORDER_DETAIL_REQUEST",he="GET_ORDER_DETAIL_SUCCESS",fe="GET_ORDER_DETAIL_FAILURE",ge={GET_STATISTIC_SUCCESS:"GET_STATISTIC_SUCCESS",GET_getTotalOrderPricePerMonthByYear_SUCCESS:"GET_getTotalOrderPricePerMonthByYear_SUCCESS"},xe={token:null,user:{firstname:"",lastname:"",email:"",picture:"",role:null},authenticate:!1,authenticating:!1,loading:!1,error:null,message:""},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:e=Object(j.a)(Object(j.a)({},e),{},{authenticating:!0});break;case x:e=Object(j.a)(Object(j.a)({},e),{},{user:t.payload.user,token:t.payload.token,authenticate:!0,authenticating:!1});break;case g:e=Object(j.a)(Object(j.a)({},e),{},{error:t.payload.error,loading:!1});break;case v:e=Object(j.a)(Object(j.a)({},e),{},{loading:!0});break;case y:e=Object(j.a)({},xe);break;case _:e=Object(j.a)(Object(j.a)({},e),{},{error:t.payload.error,loading:!1})}return e},ye=a(14),_e=a(12),Ne={categories:[],loading:!1,isUpdating:!1,isAdding:!1,isDeleting:!1,isEnabling:!1,error:null,category:{}},Ee=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(void 0==a.parentId)return[].concat(Object(_e.a)(t),[{_id:a._id,name:a.name,slug:a.slug,type:a.type,children:[]}]);var c,n=Object(ye.a)(t);try{for(n.s();!(c=n.n()).done;){var s=c.value;s._id+""===a.parentId+""?r.push(Object(j.a)(Object(j.a)({},s),{},{children:s.children&&s.children.length>0?[].concat(Object(_e.a)(s.children),[a]):[a]})):r.push(Object(j.a)(Object(j.a)({},s),{},{children:s.children?e(s.children,a):[]}))}}catch(i){n.e(i)}finally{n.f()}return r},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:e=Object(j.a)(Object(j.a)({},e),{},{loading:!0});break;case k:e=Object(j.a)(Object(j.a)({},e),{},{loading:!1,category:t.payload});break;case T:e=Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.payload.error});break;case w:e=Object(j.a)(Object(j.a)({},e),{},{loading:!0});break;case R:e=Object(j.a)(Object(j.a)({},e),{},{loading:!1,categories:t.payload.categories});break;case A:e=Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.payload.error});break;case U:e=Object(j.a)(Object(j.a)({},e),{},{isAdding:!0});break;case D:var a=Ee(e.categories,t.payload.category);e=Object(j.a)(Object(j.a)({},e),{},{categories:a,isAdding:!1});break;case P:e=Object(j.a)(Object(j.a)({},e),{},{isAdding:!1,error:t.payload.error});break;case I:e=Object(j.a)(Object(j.a)({},e),{},{isUpdating:!0});break;case F:e=Object(j.a)(Object(j.a)({},e),{},{isUpdating:!1});break;case L:e=Object(j.a)(Object(j.a)({},e),{},{isUpdating:!1,error:t.payload.error});break;case G:e=Object(j.a)(Object(j.a)({},e),{},{isDeleting:!0});break;case q:e=Object(j.a)(Object(j.a)({},e),{},{category:Object(j.a)(Object(j.a)({},e.category),{},{isAvailable:!1}),isDeleting:!1});break;case M:e=Object(j.a)(Object(j.a)({},e),{},{isDeleting:!1,error:t.payload.error});break;case Y:e=Object(j.a)(Object(j.a)({},e),{},{isEnabling:!0});break;case Q:e=Object(j.a)(Object(j.a)({},e),{},{category:Object(j.a)(Object(j.a)({},e.category),{},{isAvailable:!0}),isEnabling:!1});break;case B:e=Object(j.a)(Object(j.a)({},e),{},{isEnabling:!1,error:t.payload.error});break;default:e=Object(j.a)({},e)}return e},Se={products:[],product:{},isGetProductLoading:!1,isAdding:!1,isUpdating:!1,isDeleting:!1,isEnabling:!1},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:e=Object(j.a)(Object(j.a)({},e),{},{products:t.payload.products});break;case J:e=Object(j.a)(Object(j.a)({},e),{},{isGetProductLoading:!0});break;case H:e=Object(j.a)(Object(j.a)({},e),{},{product:t.payload,isGetProductLoading:!1});break;case V:e=Object(j.a)(Object(j.a)({},e),{},{product:{},isGetProductLoading:!1});break;case $:e=Object(j.a)(Object(j.a)({},e),{},{isAdding:!0});break;case X:e=Object(j.a)(Object(j.a)({},e),{},{product:t.payload.product,products:[].concat(Object(_e.a)(e.products),[t.payload.product]),isAdding:!1});break;case W:e=Object(j.a)(Object(j.a)({},e),{},{product:{},isAdding:!1});break;case K:e=Object(j.a)(Object(j.a)({},e),{},{isUpdating:!0});break;case ee:e=Object(j.a)(Object(j.a)({},e),{},{product:t.payload.product,products:(e.products.splice(e.products.findIndex((function(e){return e._id===t.payload.product._id})),1,t.payload.product),Object(_e.a)(e.products)),isUpdating:!1});break;case Z:e=Object(j.a)(Object(j.a)({},e),{},{product:{},isUpdating:!1});break;case te:e=Object(j.a)(Object(j.a)({},e),{},{isEnabling:!0});break;case re:e=Object(j.a)(Object(j.a)({},e),{},{product:{},products:function(){var a=e.products.findIndex((function(e){return e._id.toString()===t.payload.id.toString()}));console.log(a);var r=Object(_e.a)(e.products);return r[a].isAvailable=!1,Object(_e.a)(r)}(),isEnabling:!1});break;case ae:e=Object(j.a)(Object(j.a)({},e),{},{product:{},isEnabling:!1});break;case ce:e=Object(j.a)(Object(j.a)({},e),{},{isEnabling:!0});break;case ne:e=Object(j.a)(Object(j.a)({},e),{},{product:Object(j.a)(Object(j.a)({},e.product),{},{isAvailable:!0}),products:function(){var a=e.products.findIndex((function(e){return e._id.toString()===t.payload.id.toString()}));console.log(a);var r=Object(_e.a)(e.products);return r[a].isAvailable=!0,Object(_e.a)(r)}(),isEnabling:!1});break;case se:e=Object(j.a)(Object(j.a)({},e),{},{product:{},isEnabling:!1});break;default:e=Object(j.a)({},e)}return e},Te={error:null,message:"",isSignuping:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:e=Object(j.a)(Object(j.a)({},e),{},{isSignuping:!0,error:null});break;case C:e=Object(j.a)(Object(j.a)({},e),{},{isSignuping:!1,message:t.payload.message});break;case E:e=Object(j.a)(Object(j.a)({},e),{},{isSignuping:!1,error:t.payload.error})}return e},Ae={loading:!1,error:null,pages:[]},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:e=Object(j.a)(Object(j.a)({},e),{},{loading:!0});break;case je:e=Object(j.a)(Object(j.a)({},e),{},{loading:!1});break;case de:e=Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.payload.error});break;default:e=Object(j.a)({},e)}return e},Ue={orders:[],updating:!1,order:{},loadingDetail:!1},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:e=Object(j.a)(Object(j.a)({},e),{},{orders:t.payload.orders});break;case be:e=Object(j.a)(Object(j.a)({},e),{},{updating:!0});break;case Oe:e=Object(j.a)(Object(j.a)({},e),{},{order:t.payload.order,updating:!1});break;case me:e=Object(j.a)(Object(j.a)({},e),{},{orders:[],updating:!1});break;case pe:e=Object(j.a)(Object(j.a)({},e),{},{loadingDetail:!0});break;case he:e=Object(j.a)(Object(j.a)({},e),{},{loadingDetail:!1,order:t.payload.order});break;case fe:e=Object(j.a)(Object(j.a)({},e),{},{loadingDetail:!1,order:{},error:t.payload.error})}return e},De={revenue:0,totalOrder:0,totalProduct:0,top5:null,total7day:null,totalPerMonth:null,isGettingStatistic:!1},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.GET_STATISTIC_REQUEST:e=Object(j.a)(Object(j.a)({},e),{},{isGettingStatistic:!0});break;case ge.GET_STATISTIC_SUCCESS:e=Object(j.a)(Object(j.a)({},e),{},{revenue:t.payload.statistic.revenue,totalOrder:t.payload.statistic.totalOrder,totalProduct:t.payload.statistic.totalProduct,top5:t.payload.statistic.top5,total7day:t.payload.statistic.total7day,totalPerMonth:t.payload.statistic.totalPerMonth,isGettingStatistic:!1});break;case ge.GET_STATISTIC_FAILURE:e=Object(j.a)(Object(j.a)({},e),{},{isGettingStatistic:!1});break;case ge.GET_getTotalOrderPricePerMonthByYear_SUCCESS:e=Object(j.a)(Object(j.a)({},e),{},{totalPerMonth:t.payload.statistic.totalPerMonth})}return e},Le={isIniting:!1},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:e=Object(j.a)(Object(j.a)({},e),{},{isIniting:!0});break;case oe:e=Object(j.a)(Object(j.a)({},e),{},{isIniting:!1})}return e},Ge=Object(O.combineReducers)({auth:ve,user:we,categories:Ce,products:ke,pages:Re,orders:Pe,statistic:Ie,init:Fe}),Me=Object(O.createStore)(Ge,Object(h.composeWithDevTools)(Object(O.applyMiddleware)(p.a))),qe=m.a.create({baseURL:"https://quangtien-ecommerce-be.herokuapp.com/api",headers:{Authorization:localStorage.getItem("token")||""}});qe.interceptors.request.use((function(e){var t=Me.getState().auth;return t.token&&(e.headers.Authorization="".concat(t.token)),e})),qe.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status;return 401!==t&&403!==t||(m.a.defaults.headers.common.Authorization="",Me.dispatch(Qe())),Promise.reject(e)}));var Ye=qe,Be=a(224),Qe=function(){return function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:y}),Ye.defaults.headers.common.Authorization="",localStorage.removeItem("token"),localStorage.removeItem("user");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ze=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:S}),t.next=3,Ye.get("category/".concat(e));case 3:200===(r=t.sent).status?(c=r.data.data,a({type:k,payload:c})):a({type:T,payload:r.data.error});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear();return function(){var t=Object(u.a)(d.a.mark((function t(a){var r,c,n,s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:ie}),t.next=3,Ye.get("admin/initialdata?year=".concat(e));case 3:200===(r=t.sent).status&&(c=r.data.data,n=c.categories,s=c.products,i=c.orders,o=c.statistic,a({type:R,payload:{categories:n}}),a({type:z,payload:{products:s}}),a({type:ue,payload:{orders:i}}),a({type:ge.GET_STATISTIC_SUCCESS,payload:{statistic:o}}),a({type:oe}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear();return function(){var t=Object(u.a)(d.a.mark((function t(a){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:ie}),t.next=3,Ye.get("/admin/totalOrderPricePerMonthByYear?year=".concat(e));case 3:200===(r=t.sent).status&&(c=r.data.data.statistic,a({type:ge.GET_getTotalOrderPricePerMonthByYear_SUCCESS,payload:{statistic:c}}),a({type:oe}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},He=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:J}),t.prev=1,t.next=4,Ye.get("product/".concat(e));case 4:r=t.sent,c=Object(j.a)(Object(j.a)({},r.data.data),{},{price:r.data.data.salePrice}),a({type:H,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:V,payload:{error:t.t0.response.data.error}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},$e=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:be}),t.next=3,Ye.put("order/update",e);case 3:201===(r=t.sent).status?(a({type:Oe,payload:{order:r.data.order}}),a(Je())):a({type:me,payload:{error:r.data.error}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},We=(a(364),a(186)),Xe=a(1),Ke=["component"];var Ze=function(e){var t=e.component,a=Object(We.a)(e,Ke);return Object(Xe.jsx)(o.b,Object(j.a)(Object(j.a)({},a),{},{component:function(e){return localStorage.getItem("token")?Object(Xe.jsx)(t,Object(j.a)({},e)):Object(Xe.jsx)(o.a,{to:"/signin"})}}))},et=a(689),tt=a(688),at=a(673),rt=a(40);var ct=function(){var e=Object(o.g)(),t=Object(i.c)((function(e){return e.auth})),a=Object(i.b)(),r=function(){a(Qe()),e.push("/signin")};return Object(Xe.jsx)(tt.a,{collapseOnSelect:!0,fixed:"top",expand:"lg",bg:"dark",variant:"dark",style:{zIndex:999},children:Object(Xe.jsxs)(at.a,{fluid:!0,children:[Object(Xe.jsx)(rt.b,{to:"/",className:"navbar-brand",children:"Admin Dashboard"}),Object(Xe.jsx)(tt.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(Xe.jsx)(tt.a.Collapse,{id:"responsive-navbar-nav",children:t.authenticate?Object(Xe.jsxs)(et.a,{children:[t&&"admin"===t.user.role&&Object(Xe.jsx)("li",{className:"nav-item",children:Object(Xe.jsx)(rt.c,{to:"/signup",className:"nav-link",children:"Sign up"})}),Object(Xe.jsx)("li",{className:"nav-item",children:Object(Xe.jsx)("span",{role:"button",className:"nav-link",onClick:r,children:"Sign out"})})]}):Object(Xe.jsx)(et.a,{children:Object(Xe.jsx)("li",{className:"nav-item",children:Object(Xe.jsx)(rt.c,{to:"/signin",className:"nav-link",children:"Sign in"})})})})]})})},nt=a(674),st=a(311),it=a(222),ot=a.n(it),lt=a(314),dt=a.n(lt),jt=a(315),ut=a.n(jt),bt=a(169),mt=a.n(bt);a(368);var Ot=function(e){var t=Object(i.c)((function(e){return e.auth}));return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(ct,{}),t.authenticate?Object(Xe.jsx)(at.a,{fluid:!0,children:Object(Xe.jsxs)(nt.a,{children:[Object(Xe.jsx)(st.a,{md:2,className:"sidebar",children:Object(Xe.jsxs)("ul",{children:[t&&"admin"===t.user.role&&Object(Xe.jsx)("li",{children:Object(Xe.jsxs)(rt.c,{exact:!0,to:"/",children:[Object(Xe.jsx)(ot.a,{})," Home"]})}),Object(Xe.jsx)("li",{children:Object(Xe.jsxs)(rt.c,{to:"/categories",children:[Object(Xe.jsx)(dt.a,{}),"Categories"]})}),Object(Xe.jsx)("li",{children:Object(Xe.jsxs)(rt.c,{to:"/products",children:[Object(Xe.jsx)(ut.a,{})," Products"]})}),Object(Xe.jsx)("li",{children:Object(Xe.jsxs)(rt.c,{to:"/orders",children:[Object(Xe.jsx)(mt.a,{}),"Orders"]})})]})}),Object(Xe.jsx)(st.a,{md:10,style:{marginLeft:"auto",paddingTop:"60px"},children:e.children})]})}):e.children]})},pt=a(678),ht=a(679),ft=a(41),gt=a(84);a(370);var xt=function(e){var t=Object(o.g)(),a=Object(i.b)(),r=Object(i.c)((function(e){return e.categories})).isAdding,c=Object(ft.c)({defaultValues:{normalField:[{name:""}],filterField:[{name:"",value:""}]}}),n=c.register,s=c.control,l=c.handleSubmit,b=c.formState.errors,m=Object(ft.b)({control:s,name:"normalField"}),O=m.fields,p=m.append,h=m.remove,f=Object(ft.b)({control:s,name:"filterField"}),g=f.fields,x=f.append,v=f.remove;return Object(Xe.jsx)(at.a,{children:Object(Xe.jsx)("div",{children:Object(Xe.jsxs)("form",{onSubmit:l((function(e){var r,c=e.filterField.reduce((function(e,t){var a=e.findIndex((function(e){return e.name===t.name}));return a<0?(e.push(Object(j.a)(Object(j.a)({},t),{},{value:[t.value]})),e):(e[a].value.push(t.value),e)}),[]);console.log(Object(j.a)(Object(j.a)({},e),{},{filterField:c})),a((r=Object(j.a)(Object(j.a)({},e),{},{filterField:c}),function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:U}),e.prev=1,e.next=4,Ye.post("category/create",r);case 4:a=e.sent,c=a.data.data,t({type:D,payload:{category:c}}),t(Je()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:P,payload:{error:e.t0.response.data.error}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())).then((function(){t.push("/categories")}))})),children:[Object(Xe.jsx)("p",{className:"form__title d-block",children:"Category name:"}),Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input "},n("name",{required:"This is required."})),{},{placeholder:"Category name"})),Object(Xe.jsx)(gt.a,{errors:b,name:"name",render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}}),Object(Xe.jsxs)("div",{className:"mt-3",children:[Object(Xe.jsx)("p",{className:"form__title",children:"Additional infomation for product"}),Object(Xe.jsx)(pt.a,{className:"form__button",type:"button",onClick:function(){p({name:""})},children:"+"}),Object(Xe.jsx)("ul",{className:"form__list",children:O.map((function(e,t){return Object(Xe.jsxs)("li",{className:"form__list-item",children:[Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input"},n("normalField.".concat(t,".name"),{required:"This is required."})),{},{placeholder:"Additional infomation for product"})),O.length>1&&Object(Xe.jsx)(pt.a,{variant:"outline-danger",className:"form__input--delete",type:"button",onClick:function(){return h(t)},children:"X"}),Object(Xe.jsx)(gt.a,{errors:b,name:"normalField.".concat(t,".name"),render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}})]},e.id)}))})]}),Object(Xe.jsxs)("div",{className:"mt-3",children:[Object(Xe.jsx)("p",{className:"form__title",children:"Filterable Infomation "}),Object(Xe.jsx)(pt.a,{className:"form__button",type:"button",onClick:function(){x({name:"",value:""})},children:"+"}),Object(Xe.jsx)("ul",{className:"form__list",children:g.map((function(e,t){return Object(Xe.jsxs)("li",{className:"form__list-item d-flex",children:[Object(Xe.jsxs)("div",{className:"d-inline-block w-25 mr-2",children:[Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input w-100"},n("filterField.".concat(t,".name"),{required:"This is required."})),{},{placeholder:"Filter field"})),Object(Xe.jsx)(gt.a,{errors:b,name:"filterField.".concat(t,".name"),render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}})]}),Object(Xe.jsxs)("div",{className:"d-inline-block w-25 mr-2",children:[Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input w-100"},n("filterField.".concat(t,".value"),{required:"This is required."})),{},{placeholder:"Filter value "})),Object(Xe.jsx)(gt.a,{errors:b,name:"filterField.".concat(t,".value"),render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}})]}),g.length>1&&Object(Xe.jsx)(pt.a,{variant:"outline-danger",className:"form__input--delete",type:"button",onClick:function(){return v(t)},children:"X"})]},e.id)}))})]}),Object(Xe.jsxs)(pt.a,{variant:"success",className:"mt-3 mr-2",type:"submit",disabled:r,children:[r&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),Object(Xe.jsx)(pt.a,{variant:"secondary",className:"mt-3",onClick:function(){t.push("/categories")},disabled:r,children:"Back"})]})})})},vt=a(24),yt=a(690),_t=a(680),Nt=a(316),Et=a(170),Ct=a.n(Et);a(372);var St=function(e){var t=Object(o.g)(),a=Object(i.b)(),c=Object(r.useState)(),n=Object(vt.a)(c,2),s=n[0],l=n[1],b=Object(r.useState)([]),m=Object(vt.a)(b,2),O=m[0],p=m[1],h=Object(i.c)((function(e){return e.categories})).categories,f=Object(i.c)((function(e){return e.products})).isAdding,g=Object(r.useState)(""),x=Object(vt.a)(g,2),v=x[0],y=x[1],_=Object(ft.c)(),N=_.register,E=_.control,C=_.handleSubmit,S=_.setValue,k=_.getValues,T=_.formState.errors;return Object(ft.b)({control:E,name:"categoryInfo"}).fields,Object(Xe.jsx)(at.a,{children:Object(Xe.jsx)("div",{children:Object(Xe.jsxs)(yt.a,{onSubmit:C((function(e){if(s){var t=new FormData;Object.keys(e).forEach((function(a,r){["category","categoryInfo","productPictures"].includes(a)||t.append(a,e[a])})),t.append("category",s.name);var r,c=Object(ye.a)(e.categoryInfo);try{for(c.s();!(r=c.n()).done;){var n=r.value;""!==n.value&&""!==n.name&&t.append("categoryInfo",JSON.stringify({name:n.name,value:n.value}))}}catch(h){c.e(h)}finally{c.f()}var i,o=Object(ye.a)(O);try{for(o.s();!(i=o.n()).done;){var l=i.value;t.append("productPictures",l.file)}}catch(h){o.e(h)}finally{o.f()}var b,m=Object(ye.a)(t.entries());try{for(m.s();!(b=m.n()).done;){var p=b.value;console.log(p[0]+", "+p[1])}}catch(h){m.e(h)}finally{m.f()}a(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:$}),t.prev=1,t.next=4,Ye.post("product/create",e);case 4:r=t.sent,c=Object(j.a)(Object(j.a)({},r.data.data),{},{price:r.data.data.salePrice}),a({type:X,payload:{product:c}}),a(Je()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:W,payload:{error:t.t0.response.data.error}});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)).then((function(){}))}else y("Error")})),children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Product name:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},N("name",{required:!0})),{},{placeholder:"Category name"})),T.name&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),Object(Xe.jsxs)(nt.a,{children:[Object(Xe.jsxs)(st.a,{lg:4,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Regular Price:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},N("regularPrice",{required:!0})),{},{placeholder:"0",type:"number",onChange:function(e){var t=k("salePrice"),a=Math.round(100*(1-Number(t)/Number(e.target.value)));a<0&&(a=0),S("sale",a.toString())}})),T.regularPrice&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"})]}),Object(Xe.jsxs)(st.a,{lg:4,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Sale Price:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},N("salePrice",{required:!0})),{},{placeholder:"0",type:"number",onChange:function(e){var t=k("regularPrice"),a=Math.round(100*(1-Number(e.target.value)/Number(t)));a<0&&(a=0),S("sale",a.toString())}})),T.salePrice&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"})]}),Object(Xe.jsxs)(st.a,{lg:4,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Sale:"}),Object(Xe.jsxs)(_t.a,{className:"w-100",children:[Object(Xe.jsx)(Nt.a,Object(j.a)(Object(j.a)({className:"form__input w-75",readOnly:!0},N("sale")),{},{placeholder:"0"})),Object(Xe.jsx)(_t.a.Text,{children:"%"})]})]})]}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Quantity:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},N("quantity",{required:!0})),{},{placeholder:"0",type:"number"})),T.salePrice&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Description:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({as:"textarea",className:"form__input w-100"},N("description",{required:!0})),{},{placeholder:"Description"})),T.salePrice&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Category:"}),h.length>0&&Object(Xe.jsxs)(yt.a.Control,{as:"select",value:s&&s.name||-1,onChange:function(e){if(s)for(var t=s.filterField.length+s.normalField.length,a=0;a<t;a++)S("categoryInfo.".concat(a,".name"),""),S("categoryInfo.".concat(a,".value"),"");for(var r=h.find((function(t){return t.name===e.target.value})),c=0;c<r.filterField.length;c++)S("categoryInfo.".concat(c,".name"),r.filterField[c].name);for(var n=0,i=r.filterField.length;i<r.filterField.length+r.normalField.length;i++)S("categoryInfo.".concat(i,".name"),r.normalField[n].name),n++;l(r)},children:[Object(Xe.jsx)("option",{disabled:!0,value:-1,children:"Open this select menu"},-1),h.map((function(e){return Object(Xe.jsx)("option",{value:e.name,children:e.name},e._id)}))]}),!s&&v&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),s&&s.filterField.map((function(e,t){return Object(Xe.jsxs)("div",{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:e.name}),Object(Xe.jsx)(yt.a.Control,Object(j.a)({as:"textarea",hidden:!0,value:e.name},N("categoryInfo.".concat(t,".name")))),Object(Xe.jsxs)(yt.a.Control,Object(j.a)(Object(j.a)({as:"select",defaultValue:""},N("categoryInfo.".concat(t,".value"),{required:!0})),{},{children:[Object(Xe.jsx)("option",{value:"",disabled:!0,children:"Choose your option"}),e.value.map((function(e){return Object(Xe.jsx)("option",{value:e,children:e},e)}))]})),T.categoryInfo&&T.categoryInfo[t]&&T.categoryInfo[t].value&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"})]})})),s&&s.normalField.map((function(e,t){return Object(Xe.jsxs)("div",{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:e.name}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({hidden:!0,value:e.name},N("categoryInfo.".concat(s.filterField.length+t,".name"))),{},{placeholder:"Description"})),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},N("categoryInfo.".concat(s.filterField.length+t,".value"))),{},{placeholder:"Product infomation"}))]})})),Object(Xe.jsx)(Ct.a,{multiple:!0,value:O,onChange:function(e,t){p(e)},maxNumber:5,dataURLKey:"data_url",children:function(e){var t=e.imageList,a=e.onImageUpload,r=e.onImageRemoveAll,c=(e.onImageUpdate,e.onImageRemove),n=e.isDragging,s=e.dragProps;return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Product's pictures:"}),Object(Xe.jsxs)("div",{className:"product__images",children:[Object(Xe.jsx)(pt.a,Object(j.a)(Object(j.a)({variant:"outline-primary",className:"product__images--add",style:n?{color:"red"}:null,onClick:a},s),{},{children:"Click or Drop here"})),Object(Xe.jsx)(pt.a,{variant:"outline-danger",className:"product__images--remove-all",onClick:r,children:"Remove all images"}),Object(Xe.jsx)("div",{className:"product__images-container",children:t.map((function(e,t){return Object(Xe.jsx)("div",{children:Object(Xe.jsx)("div",{className:"product__images-image-wrapper",children:Object(Xe.jsx)("img",{src:e.data_url,alt:"",width:"100",className:"product__images-image",onClick:function(){return c(t)}})})},t)}))})]})]})}}),Object(Xe.jsxs)(pt.a,{variant:"success",className:"mt-3 mr-2",type:"submit",disabled:f,children:[f&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),Object(Xe.jsx)(pt.a,{variant:"secondary",className:"mt-3",onClick:function(){t.push("/products")},disabled:f,children:"Back"})]})})})},kt=a(107),Tt=a(686),wt=a(123),At=a.n(wt),Rt=(a(296),a(127)),Ut=a(103),Pt=a.n(Ut);a(615);var Dt=function(e){var t=[{name:"id",options:{filter:!1,sort:!1,display:!1}},"Name",{name:"Created At",options:{customBodyRender:function(e){return Pt()(new Date(e)).format("DD/MM/YYYY")}}},{name:"Updated At",options:{customBodyRender:function(e){return Pt()(new Date(e)).format("DD/MM/YYYY")}}},{name:"Available",options:{customBodyRender:function(e,t,a){return"Yes"===e?Object(Xe.jsx)(Rt.a,{class:"available-icon available-icon--check"}):Object(Xe.jsx)(Rt.b,{class:"available-icon available-icon--close"})}}}],a=Object(o.g)(),r=Object(i.c)((function(e){return e.categories})).categories,c=Object(i.c)((function(e){return e.auth})),n={filter:!0,filterType:"multiselect",download:!1,print:!1,onRowClick:function(e,t){a.push("category/edit/".concat(e[0]))},selectableRowsHideCheckboxes:!0},s=r.map((function(e){return[e._id,e.name,Pt()(e.createdAt).toDate().getTime(),Pt()(e.updatedAt).toDate().getTime(),e.isAvailable?"Yes":"No"]}));return Object(Xe.jsx)("div",{children:Object(Xe.jsxs)(at.a,{children:[Object(Xe.jsx)(nt.a,{children:Object(Xe.jsx)(st.a,{md:12,children:Object(Xe.jsx)("div",{className:"d-flex justify-content-between",children:c&&"admin"===c.user.role&&Object(Xe.jsx)(pt.a,{variant:"primary",onClick:function(){a.push("/category/add")},children:"Add"})})})}),Object(Xe.jsx)(nt.a,{className:"mt-4",children:Object(Xe.jsx)(st.a,{md:12,children:s&&Object(Xe.jsx)(Tt.a,{theme:Object(kt.a)({overrides:{MUIDataTableHeadCell:{contentWrapper:{justifyContent:"center"},toolButton:{marginLeft:"0"}},MUIDataTableBodyCell:{root:{textAlign:"center"}}}}),children:Object(Xe.jsx)(At.a,{title:"Categories",data:s,columns:t,options:n})})})})]})})};a(616);var It=function(e){var t=Object(i.b)(),a=Object(o.g)(),c=Object(o.h)().id,n=Object(ft.c)(),s=n.register,l=n.control,b=n.handleSubmit,m=n.reset,O=n.formState.errors,p=Object(i.c)((function(e){return e.categories})),h=p.category,f=p.isUpdating,g=p.isDeleting,x=p.isEnabling,v=Object(i.c)((function(e){return e.auth}));Object(r.useEffect)((function(){t(ze(c))}),[t,c]),Object(r.useEffect)((function(){if(h&&Object.keys(h).length>0){var e=h.filterField.reduce((function(e,t){var a=t.value.map((function(e,a){return Object(j.a)(Object(j.a)({},t),{},{value:e})}));return[].concat(Object(_e.a)(e),Object(_e.a)(a))}),[]);m(Object(j.a)(Object(j.a)({},h),{},{filterField:e}))}}),[m,h]);var y=Object(ft.b)({control:l,name:"normalField"}),_=y.fields,N=y.append,E=y.remove,C=Object(ft.b)({control:l,name:"filterField"}),S=C.fields,k=C.append,T=C.remove;return Object(Xe.jsx)(at.a,{children:Object(Xe.jsx)("div",{children:Object(Xe.jsxs)("form",{onSubmit:b((function(e){var a,r=e.filterField.reduce((function(e,t){var a=e.findIndex((function(e){return e.name===t.name}));return a<0?(e.push(Object(j.a)(Object(j.a)({},t),{},{value:[t.value]})),e):(e[a].value.push(t.value),e)}),[]);t((a=Object(j.a)(Object(j.a)({id:c},e),{},{filterField:r}),function(){var e=Object(u.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:I}),e.next=3,Ye.put("category/".concat(a.id),a);case 3:200===(r=e.sent).status?(t({type:F}),t(Je())):t({type:L,payload:{error:r.data.error}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){t(ze(c))}))})),children:[Object(Xe.jsx)("p",{className:"form__title d-block",children:"Category name:"}),Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input "},s("name",{required:"This is required."})),{},{placeholder:"Category name",readOnly:v&&"admin"!==v.user.role})),Object(Xe.jsx)(gt.a,{errors:O,name:"name",render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}}),Object(Xe.jsxs)("div",{className:"mt-3",children:[Object(Xe.jsx)("p",{className:"form__title",children:"Additional infomation for product"}),v&&"admin"===v.user.role&&Object(Xe.jsx)(pt.a,{className:"form__button",type:"button",onClick:function(){N({name:""})},children:"+"}),Object(Xe.jsx)("ul",{className:"form__list",children:_.map((function(e,t){return Object(Xe.jsxs)("li",{children:[Object(Xe.jsx)(gt.a,{errors:O,name:"normalField.".concat(t,".name"),render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}}),Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input"},s("normalField.".concat(t,".name"),{required:"This is required."})),{},{placeholder:"Product info name",readOnly:v&&"admin"!==v.user.role})),_.length>1&&Object(Xe.jsx)(Xe.Fragment,{children:v&&"admin"===v.user.role&&Object(Xe.jsx)(pt.a,{variant:"outline-danger",className:"form__input--delete",type:"button",onClick:function(){return E(t)},children:"X"})})]},e.id)}))})]}),Object(Xe.jsxs)("div",{className:"mt-3",children:[Object(Xe.jsx)("p",{className:"form__title",children:"Filterable Infomation "}),v&&"admin"===v.user.role&&Object(Xe.jsx)(pt.a,{className:"form__button",type:"button",onClick:function(){k({name:"",value:"",type:""})},children:"+"}),Object(Xe.jsx)("ul",{className:"form__list",children:function(){if(!(S.length<=0)){var e=S[0].name;return S.map((function(t,a){var r=!1;return e!==t.name&&(r=!0,e=t.name),Object(Xe.jsxs)("li",{className:r?"mt-3 mb-1":"mb-1",children:[Object(Xe.jsxs)("div",{className:"d-inline-block w-25 mr-2",children:[Object(Xe.jsx)(gt.a,{errors:O,name:"filterField.".concat(a,".name"),render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}}),Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input w-100"},s("filterField.".concat(a,".name"),{required:"This is required."})),{},{placeholder:"Filter field",readOnly:v&&"admin"!==v.user.role}))]}),Object(Xe.jsxs)("div",{className:"d-inline-block w-25 mr-2",children:[Object(Xe.jsx)(gt.a,{errors:O,name:"filterField.".concat(a,".value"),render:function(e){var t=e.message;return Object(Xe.jsx)("div",{className:"errorMessage",children:t})}}),Object(Xe.jsx)("input",Object(j.a)(Object(j.a)({className:"form__input w-100"},s("filterField.".concat(a,".value"),{required:"This is required."})),{},{placeholder:"Filter value ",readOnly:v&&"admin"!==v.user.role}))]}),S.length>1&&Object(Xe.jsx)(Xe.Fragment,{children:v&&"admin"===v.user.role&&Object(Xe.jsx)(pt.a,{variant:"outline-danger",className:"form__input--delete",type:"button",onClick:function(){T(a)},children:"X"})})]},"".concat(t.id,"_").concat(t.value))}))}}()})]}),v&&"admin"===v.user.role&&Object(Xe.jsxs)(pt.a,{variant:"success",className:"mt-3 mr-2",type:"submit",disabled:f||g,children:[f&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),h&&h.isAvailable?Object(Xe.jsx)(Xe.Fragment,{children:v&&"admin"===v.user.role&&Object(Xe.jsxs)(pt.a,{variant:"danger",className:"mt-3 mr-2",onClick:function(){t(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:G}),t.prev=1,t.next=4,Ye.delete("category/".concat(e));case 4:t.sent,a({type:q}),a(Je()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:M,payload:{error:t.t0.response.data.error}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(c)).then((function(){t(ze(c))}))},disabled:g||x,children:[g&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Delete Category"]})}):Object(Xe.jsx)(Xe.Fragment,{children:v&&"admin"===v.user.role&&Object(Xe.jsxs)(pt.a,{variant:"info",className:"mt-3 mr-2",onClick:function(){t(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:Y}),t.prev=1,t.next=4,Ye.put("category/enable/".concat(e));case 4:a({type:Q,payload:{id:e}}),a(Je()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:B,payload:{error:t.t0.response.data.error}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(c)).then((function(){t(ze(c))}))},disabled:g||x,children:[x&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Enable Category"]})}),Object(Xe.jsx)(pt.a,{variant:"secondary",className:"mt-3",onClick:function(){a.push("/categories")},disabled:f||g,children:"Back"})]})})})};a(617);var Lt=function(e){var t=Object(o.g)(),a=Object(i.b)(),c=Object(o.h)().id,n=Object(r.useState)(),s=Object(vt.a)(n,2),l=s[0],b=s[1],m=Object(r.useState)([]),O=Object(vt.a)(m,2),p=O[0],h=O[1],f=Object(r.useState)(!1),g=Object(vt.a)(f,2),x=g[0],v=g[1],y=Object(i.c)((function(e){return e.categories})).categories,_=Object(i.c)((function(e){return e.products})),N=_.product,E=_.isUpdating,C=_.isEnabling,S=Object(i.c)((function(e){return e.auth})),k=Object(ft.c)(),T=k.register,w=k.control,A=k.handleSubmit,R=k.setValue,U=k.getValues,P=k.reset;return Object(r.useEffect)((function(){c&&a(He(c))}),[a,c]),Object(r.useEffect)((function(){if(y&&Object.keys(y).length>0&&N&&Object.keys(N).length>0){var e=y.find((function(e){return e.name===N.category}));b(e),P(Object(j.a)({},N))}}),[P,y,N]),Object(ft.b)({control:w,name:"categoryInfo"}).fields,Object(Xe.jsx)(at.a,{children:Object(Xe.jsx)("div",{children:Object(Xe.jsxs)(yt.a,{onSubmit:A((function(e){var t=new FormData;Object.keys(e).forEach((function(a,r){["category","categoryInfo","productPictures"].includes(a)||t.append(a,e[a])})),t.append("category",l.name),console.log(e.categoryInfo);var r,n=Object(ye.a)(e.categoryInfo);try{for(n.s();!(r=n.n()).done;){var s=r.value;s.value&&t.append("categoryInfo",JSON.stringify({name:s.name,value:s.value}))}}catch(f){n.e(f)}finally{n.f()}if(x){var i,o=Object(ye.a)(p);try{for(o.s();!(i=o.n()).done;){var b=i.value;t.append("productPictures",b.file)}}catch(f){o.e(f)}finally{o.f()}}var m,O=Object(ye.a)(t.entries());try{for(O.s();!(m=O.n()).done;){var h=m.value;console.log(h[0]+", "+h[1])}}catch(f){O.e(f)}finally{O.f()}a(function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(r){var c,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:K}),a.prev=1,a.next=4,Ye.put("product/".concat(e),t);case 4:c=a.sent,n=Object(j.a)(Object(j.a)({},c.data.data),{},{price:c.data.data.salePrice}),r({type:ee,payload:{product:n}}),r(Je()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),r({type:Z,payload:{error:a.t0.response.data.error}});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}(c,t))})),children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Product name:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100 bg-white"},T("name")),{},{placeholder:"Category name",readOnly:S&&"admin"!==S.user.role})),Object(Xe.jsxs)(nt.a,{children:[Object(Xe.jsxs)(st.a,{lg:4,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Regular Price:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100 bg-white"},T("regularPrice")),{},{placeholder:"0",onChange:function(e){var t=U("salePrice"),a=Math.round(100*(1-Number(t)/Number(e.target.value)));R("sale",a.toString())},readOnly:S&&"admin"!==S.user.role}))]}),Object(Xe.jsxs)(st.a,{lg:4,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Sale Price:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100 bg-white"},T("salePrice")),{},{placeholder:"0",onChange:function(e){var t=U("regularPrice"),a=Math.round(100*(1-Number(e.target.value)/Number(t)));R("sale",a.toString())},readOnly:S&&"admin"!==S.user.role}))]}),Object(Xe.jsxs)(st.a,{lg:4,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Sale:"}),Object(Xe.jsxs)(_t.a,{className:"w-100",children:[Object(Xe.jsx)(Nt.a,Object(j.a)(Object(j.a)({className:"form__input w-75",readOnly:!0},T("sale")),{},{placeholder:"0"})),Object(Xe.jsx)(_t.a.Text,{children:"%"})]})]})]}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Quantity:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100 bg-white"},T("quantity")),{},{placeholder:"0",readOnly:S&&"admin"!==S.user.role})),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Description:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({as:"textarea",className:"form__input w-100 bg-white"},T("description")),{},{placeholder:"Description",readOnly:S&&"admin"!==S.user.role})),l&&l.filterField.map((function(e,t){return Object(Xe.jsxs)("div",{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:e.name}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({as:"textarea",hidden:!0,value:e.name},T("categoryInfo.".concat(t,".name"))),{},{placeholder:"Description"})),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"bg-white",as:"select"},T("categoryInfo.".concat(t,".value"))),{},{readOnly:S&&"admin"!==S.user.role,children:e.value.map((function(e){return Object(Xe.jsx)("option",{value:e,disabled:S&&"admin"!==S.user.role,children:e},e)}))}))]})})),l&&l.normalField.map((function(e,t){return Object(Xe.jsxs)("div",{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:e.name}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({hidden:!0,value:e.name},T("categoryInfo.".concat(l.filterField.length+t,".name"))),{},{placeholder:"Description"})),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100 bg-white"},T("categoryInfo.".concat(l.filterField.length+t,".value"))),{},{placeholder:"Product infomation",readOnly:S&&"admin"!==S.user.role}))]})})),Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title",children:"Product's pictures:"}),S&&"admin"===S.user.role&&Object(Xe.jsx)(pt.a,{variant:"outline-primary",onClick:function(){v((function(e){return!e}))},children:"Toggle replace"}),N&&N.productPictures&&N.productPictures[0],Object(Xe.jsx)("div",{className:"product__images",children:Object(Xe.jsx)("div",{className:"product__images-container",children:Object.keys(N).length>0&&N.productPictures&&N.productPictures.map((function(e,t){return Object(Xe.jsx)("div",{children:Object(Xe.jsx)("div",{className:"product__images-image-wrapper",children:Object(Xe.jsx)("img",{src:e,alt:"",width:"100",className:"product__images-image--view"})})},t)}))})})]}),x&&Object(Xe.jsx)(Ct.a,{multiple:!0,value:p,onChange:function(e,t){h(e)},maxNumber:5,dataURLKey:"data_url",children:function(e){var t=e.imageList,a=e.onImageUpload,r=e.onImageRemoveAll,c=(e.onImageUpdate,e.onImageRemove),n=e.isDragging,s=e.dragProps;return Object(Xe.jsxs)(Xe.Fragment,{children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Replace by below pictures:"}),Object(Xe.jsxs)("div",{className:"product__images",children:[Object(Xe.jsx)(pt.a,Object(j.a)(Object(j.a)({variant:"outline-primary",className:"product__images--add",style:n?{color:"red"}:null,onClick:a},s),{},{children:"Click or Drop here"})),Object(Xe.jsx)(pt.a,{variant:"outline-danger",className:"product__images--remove-all",onClick:r,children:"Remove all images"}),Object(Xe.jsx)("div",{className:"product__images-container",children:t.map((function(e,t){return Object(Xe.jsx)("div",{children:Object(Xe.jsx)("div",{className:"product__images-image-wrapper",children:Object(Xe.jsx)("img",{src:e.data_url,alt:"",width:"100",className:"product__images-image",onClick:function(){return c(t)}})})},t)}))})]})]})}}),Object(Xe.jsxs)("div",{className:"mt-2",children:[S&&"admin"===S.user.role&&Object(Xe.jsxs)(pt.a,{type:"submit",variant:"success",className:"mr-2",disabled:E||C,children:[E&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),N&&N.isAvailable?Object(Xe.jsx)(Xe.Fragment,{children:S&&"admin"===S.user.role&&Object(Xe.jsxs)(pt.a,{variant:"danger",className:"mr-2",onClick:function(){a(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:te}),t.prev=1,t.next=4,Ye.delete("product/".concat(e));case 4:a({type:re,payload:{id:e}}),a(Je()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:ae,payload:{error:t.t0.response.data.error}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(c)).then((function(){a(He(c))}))},disabled:E||C,children:[C&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Delete product"]})}):Object(Xe.jsx)(Xe.Fragment,{children:S&&"admin"===S.user.role&&Object(Xe.jsxs)(pt.a,{variant:"info",className:"mr-2",onClick:function(){a(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:ce}),t.prev=1,t.next=4,Ye.put("product/enable/".concat(e));case 4:a({type:ne,payload:{id:e}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:se,payload:{error:t.t0.response.data.error}});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}(c)).then((function(){a(He(c))}))},disabled:E||C,children:[C&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Enable product"]})}),Object(Xe.jsx)(pt.a,{variant:"secondary",onClick:function(){t.push("/products")},disabled:E||C,children:"Back"})]})]})})})},Ft=(a(618),a(318)),Gt=a.n(Ft),Mt=a(319),qt=a.n(Mt),Yt=a(33),Bt=a(191),Qt=function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")};Yt.f.register(Yt.e,Yt.k,Yt.c,Yt.q,Yt.r,Yt.h,Yt.a,Yt.m,Yt.j);var zt={plugins:{title:{display:!0,text:"Revenue each month of the year"}}},Jt=["January","February","March","April","May","June","July","August","September","October","November","December"],Vt={responsive:!0,plugins:{title:{display:!0,text:"Revenue in the last 7 days"}}};var Ht=function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.statistic})),c=Object(r.useState)((new Date).getFullYear()),n=Object(vt.a)(c,2),s=n[0],o=n[1],l=Object(i.c)((function(e){return e.init})).isIniting,d={labels:a.top5&&a.top5.products||[],datasets:[{data:a.top5&&a.top5.quantitySold||[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(255, 120, 0, 0.2)","rgba(255, 227, 0, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(255, 120, 0, 1)","rgba(255, 227, 0,1)"],borderWidth:1}]},j={labels:a.total7day&&a.total7day.days||[],datasets:[{label:"Revenue each day",data:a.total7day&&a.total7day.revenue||[],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},u={labels:Jt,datasets:[{label:"Revenue each month",data:a.totalPerMonth&&a.totalPerMonth.revenues||[],backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return Object(Xe.jsxs)(at.a,{children:[Object(Xe.jsxs)(nt.a,{className:"mt-2",children:[Object(Xe.jsx)(st.a,{sm:"4",children:Object(Xe.jsx)("div",{className:"statistic__number",children:Object(Xe.jsxs)(nt.a,{className:"d-flex align-items-center h-100",children:[Object(Xe.jsx)(st.a,{sm:"3",children:Object(Xe.jsx)("div",{className:"statistic__number-icon",style:{backgroundColor:"var(--primary)"},children:Object(Xe.jsx)(Gt.a,{})})}),Object(Xe.jsxs)(st.a,{sm:"9",children:[Object(Xe.jsx)("p",{className:"m-0 text-uppercase font-weight-bold text-secondary statistic__number-title",children:"Total revenue"}),Object(Xe.jsx)("p",{className:"m-0 statistic__number-value",style:{color:"var(--primary)"},children:a.revenue&&"$".concat(Qt(a.revenue))})]})]})})}),Object(Xe.jsx)(st.a,{sm:"4",children:Object(Xe.jsx)("div",{className:"statistic__number",children:Object(Xe.jsxs)(nt.a,{className:"d-flex align-items-center h-100",children:[Object(Xe.jsx)(st.a,{sm:"3",children:Object(Xe.jsx)("div",{className:"statistic__number-icon",style:{backgroundColor:"#00C6AB"},children:Object(Xe.jsx)(qt.a,{})})}),Object(Xe.jsxs)(st.a,{sm:"9",children:[Object(Xe.jsx)("p",{className:"m-0 text-uppercase font-weight-bold text-secondary statistic__number-title",children:"Total products"}),Object(Xe.jsxs)("p",{className:"m-0 statistic__number-value",style:{color:"#00C6AB"},children:[a.totalProduct," ",Object(Xe.jsx)("span",{style:{fontSize:"0.8rem"},children:"PRODUCTS"})]})]})]})})}),Object(Xe.jsx)(st.a,{sm:"4",children:Object(Xe.jsx)("div",{className:"statistic__number",children:Object(Xe.jsxs)(nt.a,{className:"d-flex align-items-center h-100",children:[Object(Xe.jsx)(st.a,{sm:"3",children:Object(Xe.jsx)("div",{className:"statistic__number-icon",style:{backgroundColor:"#FDC60A"},children:Object(Xe.jsx)(mt.a,{})})}),Object(Xe.jsxs)(st.a,{sm:"9",children:[Object(Xe.jsx)("p",{className:"m-0 text-uppercase font-weight-bold text-secondary statistic__number-title",children:"Total order"}),Object(Xe.jsxs)("p",{className:"m-0 statistic__number-value",style:{color:"#FDC60A"},children:[a.totalOrder," ",Object(Xe.jsx)("span",{style:{fontSize:"0.8rem"},children:"ORDERS"})]})]})]})})})]}),Object(Xe.jsxs)(nt.a,{className:"mt-2 mb-2",children:[Object(Xe.jsx)(st.a,{className:"mt-3",sm:"12",children:Object(Xe.jsxs)("div",{className:"statistic__chart",children:[Object(Xe.jsx)("div",{style:{height:"360px",width:"70%",margin:"auto"},children:Object(Xe.jsx)(Bt.a,{options:zt,data:u})}),Object(Xe.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(Xe.jsxs)(pt.a,{disabled:l,onClick:function(){o((function(e){return e-1})),t(Ve(s-1))},children:[l&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Back"]}),Object(Xe.jsx)("p",{className:" mx-3 my-auto",children:s}),Object(Xe.jsxs)(pt.a,{disabled:l||s===(new Date).getFullYear(),onClick:function(){s>=(new Date).getFullYear()||(o((function(e){return e+1})),t(Ve(s+1)))},children:[l&&Object(Xe.jsx)(ht.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Next"]})]})]})}),Object(Xe.jsx)(st.a,{sm:"12",className:"mt-2",children:Object(Xe.jsxs)(nt.a,{children:[Object(Xe.jsx)(st.a,{sm:"6",className:"mt-3",children:Object(Xe.jsx)("div",{className:"statistic__chart",style:{height:"360px"},children:Object(Xe.jsx)(Bt.c,{data:d,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Top 5 best selling products"}}}})})}),Object(Xe.jsx)(st.a,{sm:"6",className:"mt-3",children:Object(Xe.jsx)("div",{className:"statistic__chart",style:{height:"360px"},children:Object(Xe.jsx)(Bt.b,{options:Vt,data:j})})})]})})]})]})};a(619);var $t=a(695),Wt=a(693),Xt=a(696),Kt=a(691);a(620);var Zt=function(e){var t=Object(o.h)().id,a=Object(i.c)((function(e){return e.orders})).order,c=Object(r.useState)([]),n=Object(vt.a)(c,2),s=n[0],l=n[1],j=Object(i.b)();Object(r.useEffect)((function(){t&&j(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:pe}),t.next=4,Ye.get("/order/".concat(e));case 4:200===(r=t.sent).status&&(c=r.data.data,a({type:he,payload:{order:c}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:fe,payload:{error:t.t0}});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,j]),Object(r.useEffect)((function(){a.process&&a.process.length>0&&l(a.process)}),[t,a.process]);var b=s&&s.length-1-Object(_e.a)(s).reverse().findIndex((function(e){return!0===e.isCompleted}));return Object(Xe.jsx)(Xe.Fragment,{children:a&&Object(Xe.jsxs)(Xe.Fragment,{children:[s&&Object(Xe.jsx)($t.a,{sx:{width:"100%",marginBottom:"1.2rem",marginTop:"0.4rem"},children:Object(Xe.jsxs)(Wt.a,{activeStep:b+1,alternativeLabel:!0,children:[s.map((function(e,t){return Object(Xe.jsx)(Xt.a,{children:Object(Xe.jsxs)(Kt.a,{children:[e.type&&Object(Xe.jsx)("span",{children:e.type.toUpperCase()}),Object(Xe.jsx)("p",{children:e.date?new Date(e.date).toLocaleString():"N/A"})]})},e._id)})),Object(Xe.jsx)(pt.a,{disabled:0===b||b+1===s.length||1===b&&a.paymentOption&&"zalo"===a.paymentOption.toLowerCase(),onClick:function(){var e=Object(_e.a)(s);e[b].isCompleted=!1,delete e[b].date,l(Object(_e.a)(e)),j($e({_id:t,process:e}))},className:"process-back",children:"Back"}),Object(Xe.jsx)(pt.a,{disabled:b+1===s.length||0===b&&a.paymentOption&&"zalo"===a.paymentOption.toLowerCase(),onClick:function(){var e=Object(_e.a)(s);e[b+1].isCompleted=!0,e[b+1].date=(new Date).toISOString(),l(Object(_e.a)(e)),j($e({_id:t,process:e}))},className:"process-next",children:b+1===s.length-1?"Finish":"Next"})]})}),a.paymentOption&&Object(Xe.jsxs)("p",{style:{color:"#888"},children:["Payment: ",a.paymentOption.toUpperCase()]}),a.address&&Object(Xe.jsxs)("div",{className:"order-detail-card p-1 pl-3",children:[Object(Xe.jsxs)("p",{className:"my-2",children:[Object(Xe.jsxs)("span",{className:"mr-3",children:[Object(Xe.jsx)("strong",{className:"mr-8",children:"Receiver: "}),a.address.name]}),Object(Xe.jsxs)("span",{className:"mr-3",children:[Object(Xe.jsx)("strong",{className:"mr-1",children:"Phone: "}),a.address.phone]})]}),Object(Xe.jsxs)("p",{className:"my-2",children:[Object(Xe.jsxs)("span",{className:"mr-3",children:[Object(Xe.jsx)("strong",{className:"mr-1",children:"Address: "}),a.address.address]}),Object(Xe.jsxs)("span",{className:"mr-3",children:[Object(Xe.jsx)("strong",{className:"mr-1",children:"Ward: "}),a.address.ward]}),Object(Xe.jsxs)("span",{className:"mr-3",children:[Object(Xe.jsx)("strong",{className:"mr-1",children:"District: "}),a.address.district]}),Object(Xe.jsxs)("span",{className:"mr-3",children:[Object(Xe.jsx)("strong",{className:"mr-1",children:"City: "}),a.address.city]})]})]}),Object(Xe.jsx)("div",{className:"order-detail-card",children:Object(Xe.jsxs)("table",{className:"order-detail__product-table",children:[Object(Xe.jsxs)("thead",{children:[Object(Xe.jsx)("th",{className:"order-detail__product-table-heading"}),Object(Xe.jsx)("th",{className:"order-detail__product-table-heading",children:"Product"}),Object(Xe.jsx)("th",{className:"order-detail__product-table-heading",children:"Quantity"}),Object(Xe.jsx)("th",{className:"order-detail__product-table-heading",children:"Unit price"}),Object(Xe.jsx)("th",{className:"order-detail__product-table-heading",children:"Total Price"})]}),Object(Xe.jsxs)("tbody",{children:[a&&a.items&&a.items.map((function(e){return Object(Xe.jsxs)("tr",{children:[Object(Xe.jsx)("td",{className:"order-detail__product-table-image-wrapper",children:Object(Xe.jsx)("img",{className:"order-detail__product-table-image",src:e.productId.productPictures[0],alt:""})}),Object(Xe.jsx)("td",{children:e.productId.name}),Object(Xe.jsx)("td",{children:e.quantity}),Object(Xe.jsxs)("td",{className:"text-right",children:["$",Qt(e.paidPrice)]}),Object(Xe.jsxs)("td",{className:"text-right",children:["$",Qt(e.quantity*e.paidPrice)]})]},e._id)})),Object(Xe.jsxs)("tr",{className:"text-right",children:[Object(Xe.jsx)("td",{colSpan:"4",children:"Total"}),Object(Xe.jsxs)("td",{children:["$",Qt(a.items?a.items.reduce((function(e,t){return e+=t.quantity*t.paidPrice}),0):0)]})]})]})]})})]})})};var ea=function(e){var t=[{name:"Date",options:{filter:!0,sort:!0,customBodyRender:function(e){return Pt()(new Date(e)).format("DD/MM/YYYY")}}},{name:"id",options:{filter:!1,sort:!1,display:!1}},"Type","Client","Phone",{name:"Total",options:{filter:!0,sort:!0,customBodyRender:function(e){return"$".concat(Qt(e))}}},"Process"],a=Object(o.g)(),r=Object(i.c)((function(e){return e.orders})).orders,c={filter:!0,filterType:"multiselect",download:!1,print:!1,onRowClick:function(e,t){a.push("orders/".concat(e[1]))},selectableRowsHideCheckboxes:!0},n=r.map((function(e){var t,a=Object(_e.a)(e.process).reverse();return[Pt()(e.createdAt).toDate().getTime(),e._id,e.paymentOption.toUpperCase(),e.address.name,e.address.phone,Number(e.totalAmount),(t=a.find((function(e){return!0===e.isCompleted})).type,t.charAt(0).toUpperCase()+t.slice(1))]}));return Object(Xe.jsx)("div",{children:Object(Xe.jsx)(at.a,{children:Object(Xe.jsx)(nt.a,{className:"mt-4",children:Object(Xe.jsx)(st.a,{md:12,children:n&&Object(Xe.jsx)(Tt.a,{theme:Object(kt.a)({overrides:{MUIDataTableHeadCell:{contentWrapper:{justifyContent:"center"},toolButton:{marginLeft:"0"}},MUIDataTableBodyCell:{root:{textAlign:"center"}}}}),children:Object(Xe.jsx)(At.a,{title:"Order",data:n,columns:t,options:c})})})})})})};a(621);var ta=function(e){var t=Object(o.g)(),a=Object(i.c)((function(e){return e.products})).products,r=Object(i.c)((function(e){return e.auth})),c=[{name:"id",options:{filter:!1,sort:!1,display:!1}},"#","Name","Category","Regular Price","Price","Sale","Quantity","Quantity sold",{name:"Available",options:{customBodyRender:function(e,t,a){return"Yes"===e?Object(Xe.jsx)(Rt.a,{class:"available-icon available-icon--check"}):Object(Xe.jsx)(Rt.b,{class:"available-icon available-icon--close"})}}}],n={filter:!0,filterType:"multiselect",download:!1,print:!1,onRowClick:function(e,a){t.push("product/".concat(e[0]))},selectableRowsHideCheckboxes:!0,rowsPerPage:100},s=a.map((function(e,t){return[e._id,t+1,e.name,e.category,Number(e.regularPrice),Number(e.salePrice),Number(e.sale),Number(e.quantity),Number(e.quantitySold),e.isAvailable?"Yes":"No"]}));return Object(Xe.jsx)("div",{children:Object(Xe.jsxs)(at.a,{children:[Object(Xe.jsx)(nt.a,{children:Object(Xe.jsx)(st.a,{md:12,children:Object(Xe.jsx)("div",{className:"d-flex justify-content-between",children:r&&"admin"===r.user.role&&Object(Xe.jsx)(pt.a,{variant:"primary",onClick:function(){t.push("/product/add")},children:"Add"})})})}),Object(Xe.jsx)(nt.a,{className:"mt-4",children:Object(Xe.jsx)(st.a,{md:12,children:s&&Object(Xe.jsx)(At.a,{title:"Products",data:s,columns:c,options:n})})})]})})};var aa=function(e){var t=null;switch(e.type){case"select":t=Object(Xe.jsxs)(yt.a.Group,{className:"mb-3",children:[e.label&&Object(Xe.jsx)(yt.a.Label,{children:e.label}),Object(Xe.jsxs)("select",{className:"form-control",value:e.value,onChange:e.onChange,children:[Object(Xe.jsx)("option",{value:"",children:e.placeholder}),e.options.length>0?e.options.map((function(e,t){return Object(Xe.jsx)("option",{value:e.value,children:e.name},t)})):null]})]});break;default:t=Object(Xe.jsxs)(yt.a.Group,{className:"mb-1",children:[e.label&&Object(Xe.jsx)(yt.a.Label,{children:e.label}),Object(Xe.jsx)(yt.a.Control,{type:e.type,placeholder:e.placeholder,value:e.value,onChange:e.onChange}),Object(Xe.jsx)(yt.a.Text,{className:"text-muted",children:e.errorMessage})]})}return t};var ra=function(e){var t=Object(r.useState)(""),a=Object(vt.a)(t,2),c=a[0],n=a[1],s=Object(r.useState)(""),l=Object(vt.a)(s,2),b=l[0],m=l[1],O=Object(r.useState)(""),p=Object(vt.a)(O,2),h=(p[0],p[1],Object(i.c)((function(e){return e.auth}))),v=Object(i.b)();return h.authenticate?Object(Xe.jsx)(o.a,{to:"/"}):Object(Xe.jsx)("div",{style:{height:"100vh"},className:"d-flex justify-content-center align-items-center",children:Object(Xe.jsxs)(yt.a,{onSubmit:function(e){var t;e.preventDefault(),v((t={email:c,password:b},function(){var e=Object(u.a)(d.a.mark((function e(a){var r,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:f}),e.prev=1,e.next=4,Ye.post("/admin/signin",Object(j.a)({},t));case 4:r=e.sent,c=r.data.token,n=Object(Be.a)(c),console.log({user1:n}),localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(n)),a({type:x,payload:{token:c,user:n}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a({type:g,payload:{error:e.t0.response.data.error||e.t0.response.data.message}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()))},className:"w-25",children:[h.error&&Object(Xe.jsx)("p",{className:"errorMessage",children:h.error}),Object(Xe.jsx)(aa,{label:"Email",placeholder:"Email",type:"email",value:c,onChange:function(e){return n(e.target.value)}}),Object(Xe.jsx)(aa,{label:"Password",placeholder:"Password",type:"password",value:b,onChange:function(e){return m(e.target.value)}}),Object(Xe.jsx)(pt.a,{variant:"primary",type:"submit",children:"Submitt"})]})})};var ca=function(e){var t=Object(r.useState)(""),a=Object(vt.a)(t,2),c=(a[0],a[1],Object(r.useState)("")),n=Object(vt.a)(c,2),s=(n[0],n[1],Object(r.useState)("")),o=Object(vt.a)(s,2),l=(o[0],o[1],Object(r.useState)("")),b=Object(vt.a)(l,2),m=(b[0],b[1],Object(r.useState)("")),O=Object(vt.a)(m,2),p=(O[0],O[1],Object(r.useState)("")),h=Object(vt.a)(p,2),f=h[0],g=h[1],x=(Object(i.c)((function(e){return e.auth})),Object(i.c)((function(e){return e.user}))),v=Object(i.b)(),y=Object(ft.c)({defaultValues:{role:"staff"}}),_=y.register,S=y.reset,k=y.handleSubmit,T=y.formState.errors;return Object(Xe.jsx)("div",{style:{height:"100vh"},className:"d-flex justify-content-center align-items-center",children:Object(Xe.jsxs)(yt.a,{onSubmit:k((function(e){e.password===e.confirmPassword?(g(""),v(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:N}),t.prev=1,"admin"!==e.role){t.next=7;break}return t.next=5,Ye.post("/admin/signup",Object(j.a)({},e));case 5:t.sent,a({type:C,payload:{message:e.email+" is registered completely!"}});case 7:if("staff"!==e.role){t.next=12;break}return t.next=10,Ye.post("/admin/staff-signup",Object(j.a)({},e));case 10:t.sent,a({type:C,payload:{message:e.email+" is registered completely!"}});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),a({type:E,payload:{error:t.t0.response.data.error}});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()}(e)).then((function(){S()}))):g("Password not match")})),className:"w-50",children:[x.message&&Object(Xe.jsx)("span",{style:{color:"green"},children:x.message}),x.error&&!x.message&&Object(Xe.jsx)("span",{className:"errorMessage",children:x.error}),Object(Xe.jsxs)(nt.a,{children:[Object(Xe.jsxs)(st.a,{md:6,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"First Name:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},_("firstName",{required:!0})),{},{placeholder:"First name"})),T.firstName&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"})]}),Object(Xe.jsxs)(st.a,{md:6,children:[Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Last Name:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},_("lastName",{required:!0})),{},{placeholder:"Last name"})),T.lastName&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"})]})]}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Email:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},_("email",{required:!0})),{},{placeholder:"Email",type:"email"})),T.email&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Password:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},_("password",{required:!0})),{},{placeholder:"Password",type:"password"})),T.password&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),Object(Xe.jsx)(yt.a.Label,{className:"form__title d-block",children:"Confirm password:"}),Object(Xe.jsx)(yt.a.Control,Object(j.a)(Object(j.a)({className:"form__input w-100"},_("confirmPassword",{required:!0})),{},{placeholder:"Confirm password",type:"password"})),T.confirmPassword&&Object(Xe.jsx)("span",{className:"errorMessage",children:"This field is required"}),""!==f&&!T.confirmPassword&&Object(Xe.jsx)("span",{className:"errorMessage",children:f}),Object(Xe.jsx)(yt.a.Check,Object(j.a)(Object(j.a)({type:"radio",name:"role"},_("role")),{},{value:"admin",label:"Admin"})),Object(Xe.jsx)(yt.a.Check,Object(j.a)(Object(j.a)({type:"radio",name:"role"},_("role")),{},{value:"staff",label:"Staff"})),Object(Xe.jsx)("br",{}),Object(Xe.jsx)(pt.a,{variant:"primary",type:"submit",children:"Submit"})]})})};var na=function(){var e=Object(i.c)((function(e){return e.auth})),t=Object(i.b)();return Object(r.useEffect)((function(){e.authenticate?t(Je()):t(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=localStorage.getItem("token"))?(r=Object(Be.a)(a),console.log({user2:r}),t({type:x,payload:{token:a,user:r}})):t({type:g,payload:{error:""}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e.authenticate,t]),Object(Xe.jsx)("div",{className:"App",children:Object(Xe.jsx)(Ot,{children:Object(Xe.jsxs)(o.d,{children:[e&&"admin"===e.user.role&&Object(Xe.jsx)(Ze,{exact:!0,path:"/",component:Ht}),Object(Xe.jsx)(Ze,{exact:!0,path:"/products",component:ta}),Object(Xe.jsx)(Ze,{exact:!0,path:"/orders",component:ea}),Object(Xe.jsx)(Ze,{exact:!0,path:"/orders/:id",component:Zt}),e&&"admin"===e.user.role&&Object(Xe.jsx)(Ze,{exact:!0,path:"/product/add",component:St}),Object(Xe.jsx)(Ze,{exact:!0,path:"/categories",component:Dt}),e&&"admin"===e.user.role&&Object(Xe.jsx)(Ze,{exact:!0,path:"/category/add",component:xt}),Object(Xe.jsx)(Ze,{exact:!0,path:"/category/edit/:id",component:It}),Object(Xe.jsx)(Ze,{exact:!0,path:"/product/:id",component:Lt}),e&&"admin"===e.user.role&&Object(Xe.jsx)(Ze,{path:"/signup",component:ca}),e&&"staff"===e.user.role&&Object(Xe.jsx)(o.a,{to:"/products"}),Object(Xe.jsx)(o.b,{path:"/signin",component:ra})]})})})},sa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,698)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))};window.store=Me,s.a.render(Object(Xe.jsx)(i.a,{store:Me,children:Object(Xe.jsx)(rt.a,{children:Object(Xe.jsx)(c.a.StrictMode,{children:Object(Xe.jsx)(na,{})})})}),document.getElementById("root")),sa()}},[[622,1,2]]]);
//# sourceMappingURL=main.bb78a2b1.chunk.js.map